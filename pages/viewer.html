<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>IFC Viewer - ThatOpen</title>
    <script type="module">
      import './libs/engine_components-main/index.js';

      window.onload = () => {
        const viewer = document.querySelector('to-viewer');
        const urlParams = new URLSearchParams(window.location.search);
        const file = urlParams.get('file');

        if (file) {
          fetch(file)
            .then(res => res.blob())
            .then(blob => {
              const fileObj = new File([blob], file.split('/').pop(), {
                type: 'application/octet-stream',
              });
              viewer.loadFile(fileObj);
            });
        }
      };
    </script>
    <style>
      html, body {
        margin: 0;
        height: 100%;
        overflow: hidden;
      }

      to-viewer {
        width: 100vw;
        height: 100vh;
        display: block;
      }
    </style>
  </head>
  <body>
    <to-viewer></to-viewer>
  </body>
</html>
